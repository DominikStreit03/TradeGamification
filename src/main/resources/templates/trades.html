<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Trades - Trading Gamification</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50 text-gray-900">

<!-- Header -->
<div th:replace="fragments/header :: headerFragment"></div>

<div class="container mx-auto p-6">
    <div class="flex items-start gap-6">
        <!-- Left: Trades table -->
        <div class="flex-1">
            <h1 class="text-2xl font-bold mb-4">Trades</h1>

            <div class="bg-white rounded shadow p-4">
                <div th:if="${#lists.isEmpty(user.trades)}">No trades yet</div>
                <div th:if="${!#lists.isEmpty(user.trades)}" class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200 text-sm">
                        <thead class="bg-gray-50">
                        <tr class="text-left text-xs text-gray-600 uppercase tracking-wider">
                            <th class="px-3 py-2">Timestamp</th>
                            <th class="px-3 py-2">Instrument</th>
                            <th class="px-3 py-2">Market</th>
                            <th class="px-3 py-2">Entry</th>
                            <th class="px-3 py-2">SL</th>
                            <th class="px-3 py-2">TP</th>
                            <th class="px-3 py-2">Result</th>
                            <th class="px-3 py-2">Candle</th>
                            <th class="px-3 py-2">Setup</th>
                            <th class="px-3 py-2">Entry OK</th>
                            <th class="px-3 py-2">SL OK</th>
                            <th class="px-3 py-2">TP OK</th>
                            <th class="px-3 py-2">Respected Kill</th>
                            <th class="px-3 py-2">Avoided Impulse</th>
                        </tr>
                        </thead>
                        <tbody class="divide-y">
                        <tr th:each="t : ${#lists.reverse(user.trades)}">
                            <td class="px-3 py-2" th:text="${t.timestamp}"></td>
                            <td class="px-3 py-2" th:text="${t.instrument}"></td>
                            <td class="px-3 py-2" th:text="${t.market}"></td>
                            <td class="px-3 py-2" th:text="${t.entryPrice}"></td>
                            <td class="px-3 py-2" th:text="${t.slPrice}"></td>
                            <td class="px-3 py-2" th:text="${t.tpPrice}"></td>
                            <td class="px-3 py-2" th:text="${t.result}"></td>
                            <td class="px-3 py-2" th:text="${t.candleTiming}"></td>
                            <td class="px-3 py-2" th:text="${t.setupCorrect}"></td>
                            <td class="px-3 py-2" th:text="${t.entryCorrect}"></td>
                            <td class="px-3 py-2" th:text="${t.slCorrect}"></td>
                            <td class="px-3 py-2" th:text="${t.tpCorrect}"></td>
                            <td class="px-3 py-2" th:text="${t.respectedKill}"></td>
                            <td class="px-3 py-2" th:text="${t.avoidedImpulse}"></td>
                        </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Right: Create Trade fragment -->
        <div class="w-80">
            <div th:insert="fragments/createTrade :: createTradeFragment"></div>
        </div>
    </div>
</div>

</body>
</html>
